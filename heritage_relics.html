<!DOCTYPE html>
<title>水融千年情 | 数字大运河</title>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
  <style>
    .btn {
      display: inline-block;
      padding: 10px 20px;
      background-color: #8bc34a; /* 浅绿色 */
      color: #fff; /* 文本颜色为白色 */
      font-size: 16px; /* 字体大小 */
      text-decoration: none; /* 文本装饰为无 */
      border: none; /* 边框为无 */
      border-radius: 5px; /* 圆角 */
      cursor: pointer; /* 光标样式为手型 */
      transition: background-color 0.3s; /* 过渡效果 */
      margin-right: 20px;
      margin-top: 20px;
    }
  
    .btn:hover {
      background-color: #7cb342; /* 悬停时的背景颜色 */
    }
    #buttonContainer {
      text-align: right; /* 居中按钮 */
      background-color:#332E27
    }
  </style>
</head>
<body style="height: 100%; margin: 0">
  <div id="buttonContainer">
    <a href="history.html" class="btn">历史沿革</a>
  </div>
  <div id="container" style="height: 100%">
   
  </div>

  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.0/files/dist/echarts.min.js"></script>
  
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.0/files/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts-gl/2/files/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts-stat/latest/files/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/4.9.0/files/map/js/china.js"></script>
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/4.9.0/files/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.0/files/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
var dom = document.getElementById('container');
var myChart = echarts.init(dom, null, {
    renderer: 'canvas',
    useDirtyRect: false
});
var app = {};
    
var option;
const colors = ['#57FFAE', '#53FF78', '#51EA51', '#57CC3F', '#559A25'];
const bgColor = '#332E27';

const itemStyle = {
  star5: {
    color: colors[0]
  },
  star4: {
    color: colors[1]
  },
  star3: {
    color: colors[2]
  },
  star2: {
    color: colors[3]
  }
};
const data = [
  { 
    name: '通惠河',
    itemStyle: {
      color: colors[1]
    },
    children: [
      { 
        name: '北京',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '澄清闸'
              },
              {
                name: '平津上闸'
              },
              {
                name: '南新仓'
              },
              {
                name:'禄米仓'
              },
              {
                name:'汇通祠'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name:'东汉 三国'
              },
              {
                name:'隋 唐 金'
              },
              {
                name:'元 明 清'
              } 
            ]
          },
          {
            name:'相关人物',
            children:[
                {
                    name:'于成龙'
                },
                {
                    name:'郭守敬'
                }
            ]
          }
        ]
        }
    ]
  },
  {
    name: '北运河',
    itemStyle: {
      color: colors[2]
    },
    children: [
      {
        name: '天津',
        children: [
        {
            name: '名胜古迹',
            children: [
              {
                name: '三岔河口'
              },
              {
                name:'天妃宫遗址'
              },
              {
                name:'天后宫'
              },
              {
                name:'广东会馆'
              },
              {
                name:'清真大寺'
              }
            ]
          },
        { 
           name: '建设沿革',
            children: [
              {
                name:'汉 隋 唐'
              },
              {
                name:'辽 金 元'
              },
              {
                name:'明 清'
              }
            ]
          },
          
          {
            name: '相关人物',
            children: [
              {
                name: '魏藻德'
              },
              {
                name:'陈仪'
              },
              {
                name:'梁肯堂'
              },
              {
                name:'周馥'
              },
              {
                name:'梁翥鸿'
              }
            ]
          }
        ]
      }
    ]
  },
  { 
    name: '南运河',
    itemStyle: {
      color: colors[1]
    },
    children: [
      {
        name: '沧州',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '沧州旧城'
              },
              {
                name: '沧州铁狮子'
              },
              {
                name: '沧州码头旧址'
              },
              {
                name: '清真北大寺'
              },
              {
                name: '清真女寺'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '周 秦 汉'
              },
              {
                name: '隋 唐 宋'
              },
              {
                name: '元 明 清'
              }
            ]
          },
          {
            name: '相关人物',
            children: [
              {
                name: '姜师度'
              },
              {
                name: '马之贞'
              },
              {
                name: '张缙'
              },
              {
                name: '陈鹏年'
              },
              {
                name: '杜充'
              }
            ]
          }
        ]
      }
    ]
  },
  { 
    name: '会通河',
    itemStyle: {
      color: colors[1]
    },
    children: [
      {
        name: '济宁',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '铁塔寺'
              },
              {
                name: '太白寺'
              },
              {
                name: '西太寺'
              },
              {
                name: '天井闸'
              },
              {
                name: '草桥闸'
              },
              {
                name: '会通桥'
              },
              {
                name: '夏桥'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '夏 商 周'
              },
              {
                name: '秦 汉 隋'
              },
              {
                name: '唐 宋 金'
              },
              {
                name: '元 明 清'
              }
            ]
          },
          {
            name: '相关人物',
            children: [
              {
                name: '普哈丁'
              },
              {
                name: '毕辅国'
              },
              {
                name:'张楷'
              },
              {
                name:'王宠'
              },
              {
                name:'胡瓒'
              }               
            ]
          }
        ]
      },
      {
        name: '聊城',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '聊城铁塔'
              },
              {
                name: '光岳楼'
              },
              {
                name: '傅氏祠堂'
              },
              {
                name: '海源阁'
              },
              {
                name: '运河小码头'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '春秋 战国 秦'
              },
              {
                name: '汉 元 明'
              },
              {
                name: '清 民国'
              }
            ]
          },
          {
            name: '相关人物',
            children: [
              {
                name: '杨以增'
              },
              {
                name: '康熙帝'
              },
              {
                name: '乾隆帝'
              },
              {
                name: '李东阳'
              },
              {
                name: '归有光'
              }
            ]
          }
        ]
      }
    ]
  },
  { 
    name: '中运河',
    itemStyle: {
      color: colors[1]
    },
    children: [
      {
        name: '徐州',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '徐州三洪'
              },
              {
                name: '广运仓遗址'
              },
              {
                name: '奎山塔遗址'
              },
              {
                name: '黄楼'
              },
              {
                name: '荆山桥'
              },
              {
                name: '徐州古城墙'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '春秋 战国 汉'
              },
              {
                name: '隋 唐 宋'
              },
              {
                name: '元 明 清'
              }
            ] 
          },
          {
            name: '相关人物',
            children: [
              {
                name: '宋伯颜不花'
              },
              {
                name: '贾鲁'
              },
              {
                name: '王銮'
              },
              {
                name: '孔毓珣'
              },
              {
                name: '严粮'
              }
            ]
          }
        ]
      }
    ]
  },
  { 
    name: '淮阳运河',
    itemStyle: {
      color: colors[1]
    },
    children: [
      {
        name: '淮安',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '末口遗址'
              },
              {
                name: '流均口旧址'
              },
              {
                name: '林家码头遗址'
              },
              { 
                name: '矶心闸'
              },
              {
                name: '淮安城墙遗址'
              },
              {
                name: '勺湖碑园'
              },
              {
                name:'天妃宫遗址'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '春秋 魏晋'
              },
              {
                name: '唐 宋 元'
              },
              {
                name: '明 清'
              }
            ]
          },
          {
            name: '相关人物',
            children: [
              {
                name: '陈瑄'
              },
              {
                name: '王宗沐'
              }
            ]
          }
        ]
      },
      {
        name: '扬州',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '盐务会馆'
              },
              {
                name: '普哈丁墓园'
              },
              {
                name: '仙鹤寺'
              },
              {
                name: '宝轮寺禅堂遗构'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '春秋 汉 三国'
              },
              {
                name: '隋 唐 宋'
              },
              {
                name: '明 清'
              }
            ]
          }
        ]
      }
    ]
  },
  { 
    name: '江南运河',
    itemStyle: {
      color: colors[1]
    },
    children: [
      {
        name: '镇江',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '西津渡遗迹'
              },
              {
                name: '小码头遗址'
              },
              {
                name: '昭关石塔'
              },
              {
                name: '广肇会所'
              },
              {
                name: '新河街'
              },
              {
                name: '大运河丹徒段'
              },
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '春秋 秦 汉'
              },
              {
                name: '晋 宋 明 清'
              }
            ]
          },
          {
            name: '相关人物',
            children: [
              {
                name: '曹操'
              },
              {
                name:'陈勋'
              },
              {
                name:'林则徐'
              }
            ]
          }
        ]
      },
      {
        name: '无锡',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '清名桥历史街区'
              },
              {
                name: '清明桥'
              },
              { 
                name: '惠山古镇'
              },
              {
                name: '北仓门'
              },
              {
                name: '金石碑刻'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '商 周 春秋'
              },
              {
                name: '秦 汉 三国'
              },
              {
                name: '西晋 隋 唐'
              },
              {
                name: '五代 宋 元'
              },
              {
                name:'明 清'
              }
            ]
          },
          {
            name: '相关人物',
            children: [
              {
                name: '吴泰伯'
              }
            ]
          }
        ]
      },
      {
        name:'苏州',
        children:[
          {
            name:'名胜古迹',
            children:[
              {
                name:'苏州运河故道'
              },
              {
                name: '惠萌园'
              },
              {
                name: '轩辕宫'
              },
              {
                name: '虎丘塔'
              },
              {
                name: '桥梁'
              }
            ]
          },
          {
            name:'建设沿革',
            children:[
              {
                name:'春秋战国'
              }
            ]
          },
          {
            name:'相关人物',
            children:[
              {
                name:'白居易'
              },
              {
                name:'冯桂芬'
              },
              {
                name:'李鸿章'
              },
              {
                name:'隋文帝'
              },
              {
                name:'伍子胥'
              }
            ]
          }
        ]
      }
    ]
  },
  { 
    name: '浙东运河',
    itemStyle: {
      color: colors[1]
    },
    children: [
      {
        name: '杭州',
        children: [
          {
            name: '名胜古迹',
            children: [
              {
                name: '拱宸桥'
              },
              {
                name: '富义仓'
              },
              {
                name: '小河直街历史街区'
              },
              {
                name: '凤山水城门'
              }
            ]
          },
          {
            name: '建设沿革',
            children: [
              {
                name: '秦 东汉 三国'
              },
              {
                name: '隋 唐 宋'
              },
              {
                name: '元 明 清'
              },
              {
                name: '近代'
              }
            ]
          }
        ]
      },
      {
        name:'宁波',
        children :[
          {
            name:'名胜古迹',
            children:[
              {
                name:'大西坝遗址'
              },
              {
                name:'庆安会馆遗址'
              },
              {
                name:'永丰库遗址'
              }
            ]
          },
          {
            name:'建设沿革',
            children:[
              {
                name:'春秋 秦 汉'
              },
              {
                name:'唐 宋 元'
              },
              {
                name:'明 清'
              }
            ]
          },
          {
            name:'相关人物',
            children:[
              {
                name:'贺循'
              },
              {
                name:'齐瀚'
              },
              {
                name:'钱镠'
              }
            ]
          }
        ]
      }
    ]
  }
];
for (let j = 0; j < data.length; ++j) {
  let level1 = data[j].children;
  for (let i = 0; i < level1.length; ++i) {
    let block = level1[i].children;
    let bookScore = [];
    let bookScoreId;
    for (let star = 0; star < block.length; ++star) {
      let style = (function (name) {
        switch (name) {
          case '相关人物':
            bookScoreId = 0;
            return itemStyle.star5;
          case '建设沿革':
            bookScoreId = 1;
            return itemStyle.star4;
          case '名胜古迹':
            bookScoreId = 2;
            return itemStyle.star3;
        }
      })(block[star].name);
      block[star].label = {
        color: style.color,
        downplay: {
          opacity: 0.5
        }
      };
      if (block[star].children) {
        style = {
          opacity: 1,
          color: style.color
        };
        block[star].children.forEach(function (book) {
          book.value = 1;
          book.itemStyle = style;
          book.label = {
            color: style.color
          };
          let value = 1;
          if (bookScoreId === 0 || bookScoreId === 3) {
            value = 5;
          }
          if (bookScore[bookScoreId]) {
            bookScore[bookScoreId].value += value;
          } else {
            bookScore[bookScoreId] = {
              color: colors[bookScoreId],
              value: value
            };
          }
        });
      }
    }
    level1[i].itemStyle = {
      color: data[j].itemStyle.color
    };
  }
}
option = {
  backgroundColor: bgColor,
  color: colors,
  series: [
    {
      type: 'sunburst',
      center: ['50%', '48%'],
      data: data,
      sort: function (a, b) {
        if (a.depth === 1) {
          return b.getValue() - a.getValue();
        } else {
          return a.dataIndex - b.dataIndex;
        }
      },
      label: {
        rotate: 'radial',
        color: bgColor
      },
      itemStyle: {
        borderColor: bgColor,
        borderWidth: 2
      },
      levels: [
        {},
        {
          r0: 0,
          r: 150  , // 原来的40乘以1.8为72
          label: {
            rotate: 0
          }
        },
        {
          r0: 150, // 原来的40乘以1.8为72
          r: 189, // 原来的105乘以1.8为189
        },
        {
          r0: 207, // 原来的115乘以1.8为207
          r: 252, // 原来的140乘以1.8为252
          itemStyle: {
            shadowBlur: 3.6, // 原来的2乘以1.8为3.6
            shadowColor: colors[2],
            color: 'transparent'
          },
          label: {
            rotate: 'tangential',
            fontSize: 9, // 原来的10乘以1.8为18
            color: colors[0]
          }
        },
        {
          r0: 252, // 原来的140乘以1.8为252
          r: 261, // 原来的145乘以1.8为261
          itemStyle: {
            shadowBlur: 144, // 原来的80乘以1.8为144
            shadowColor: colors[0]
          },
          label: {
            position: 'outside',
            textShadowBlur: 9, // 原来的5乘以1.8为9
            textShadowColor: '#333'
          },
          downplay: {
            label: {
              opacity: 0.5
            }
          }
        }
      ]
    }
  ]
};

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>